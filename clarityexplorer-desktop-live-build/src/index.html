<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="script-src 'self' 'unsafe-inline';"
    />
    <title>Clarity Explorer</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="shell">
      <aside id="sidebar">
        <div id="sidebar-top">
          <div id="brand">
            <div id="brand-icon"></div>
            <div>
              <div id="brand-title">Clarity Explorer</div>
              <div id="brand-sub">Local-First Workspace</div>
            </div>
          </div>
          <button id="add-project-btn" title="New Project">Ôºã</button>
        </div>

        <div id="new-project-bar" class="hidden">
          <input id="new-project-input" placeholder="New project name‚Ä¶" />
          <button id="new-project-create">Create</button>
          <button id="new-project-cancel">‚úï</button>
        </div>

        <ul id="project-list"></ul>

        <div id="project-meta-panel" class="hidden">
          <div id="project-meta-inner">
            <div id="project-meta-header">
              <span id="project-meta-name"></span>
              <button id="rename-project-btn" title="Rename Project">‚úé</button>
            </div>
            <div id="project-dates">
              <div id="meta-created"></div>
              <div id="meta-updated"></div>
            </div>
            <textarea
              id="project-description"
              placeholder="Project description..."
            ></textarea>
          </div>
        </div>

        <div id="delete-project-bar">
          <button id="delete-project-btn">Delete Project</button>
        </div>
      </aside>

      <div id="resizer-sidebar" class="resizer-vertical"></div>

      <main id="main">
        <div id="top-bar">
          <div id="search-group">
            <div id="search-input-wrapper">
              <input id="project-search" placeholder="Search filenames..." />
              <div
                id="content-search-toggle"
                title="Deep content search (Press Enter)"
              >
                <input type="checkbox" id="content-search-checkbox" />
                <label for="content-search-checkbox">Abc</label>
              </div>
            </div>
            <input id="global-search" placeholder="Global Tag Search..." />
          </div>
          <button id="theme-toggle-btn" title="Toggle light/dark">Theme</button>
          <button id="about-btn" title="About Clarity Explorer">About</button>
        </div>

        <div id="about-panel" class="hidden">
          <div id="about-inner">
            <h2>Clarity Explorer</h2>
            <p class="subtitle">
              A quiet, local-first workspace for research, reading, and
              thinking.
            </p>

            <div class="about-section">
              <h3>Philosophy</h3>
              <p>
                Clarity Explorer is a <strong>"Virtual Overlay"</strong> for
                your file system. Unlike traditional file managers that force
                you to move files into specific folders, Clarity lets you create
                "Projects" that group files from anywhere on your hard drive
                (Downloads, Documents, External Drives) without moving or
                duplicating the originals.
              </p>
              <p>
                It is built on the <strong>Local-First</strong> philosophy: your
                data never leaves your machine, there is no cloud sync, and no
                telemetry. You own your notes and your files.
              </p>
            </div>

            <div class="about-section">
              <h3>Workflow</h3>
              <dl>
                <dt>1. Create a Project</dt>
                <dd>Create a virtual bucket (e.g., "Thesis Research").</dd>

                <dt>2. Add Files</dt>
                <dd>
                  Click <strong>+</strong> to add PDFs, Docs, Images, or Text.
                  The original files stay exactly where they are on disk.
                </dd>

                <dt>3. Read & Annotate</dt>
                <dd>
                  Use the <strong>Split View</strong> to read on top and write
                  notes on the bottom. Notes are linked to the file's unique
                  "Content Hash," so they survive even if you rename the file.
                </dd>

                <dt>4. Deep Search</dt>
                <dd>
                  Toggle the <strong>Abc</strong> button in the sidebar search.
                  Press <kbd>Enter</kbd> to scan the
                  <em>actual text content</em>
                  of every PDF, DOCX, and Text file in the project.
                </dd>
              </dl>
            </div>

            <div class="about-section">
              <h3>Keyboard Shortcuts</h3>
              <table class="shortcuts-table">
                <tr>
                  <th><kbd>‚åò</kbd> / <kbd>Ctrl</kbd> + <kbd>N</kbd></th>
                  <td>New Project</td>
                </tr>
                <tr>
                  <th><kbd>‚åò</kbd> / <kbd>Ctrl</kbd> + <kbd>O</kbd></th>
                  <td>Add files to current project</td>
                </tr>
                <tr>
                  <th><kbd>‚åò</kbd> / <kbd>Ctrl</kbd> + <kbd>F</kbd></th>
                  <td>Focus Project Search (Sidebar)</td>
                </tr>
                <tr>
                  <th><kbd>‚åò</kbd> + <kbd>Shift</kbd> + <kbd>F</kbd></th>
                  <td>Focus Global Tag Search</td>
                </tr>
                <tr>
                  <th><kbd>Enter</kbd></th>
                  <td>Open file (if focused) / Trigger Deep Search</td>
                </tr>
                <tr>
                  <th><kbd>Double Click</kbd></th>
                  <td>Open file in default system app</td>
                </tr>
                <tr>
                  <th><kbd>‚åò</kbd> / <kbd>Ctrl</kbd> + <kbd>F</kbd></th>
                  <td>
                    <strong>Inside File:</strong> Opens Find (Custom or Native
                    PDF)
                  </td>
                </tr>
              </table>
            </div>

            <div class="about-section">
              <h3>Limitations & Data Safety</h3>
              <ul>
                <li>
                  <strong>Moved Files:</strong> If you move a file on your hard
                  drive, Clarity will lose track of it. Use the
                  <strong>"Locate"</strong> button in the preview pane to point
                  to the new location. Your notes will be instantly migrated and
                  restored.
                </li>
                <li>
                  <strong>OCR:</strong> Deep search supports PDF text, DOCX,
                  TXT, MD, and HTML. It does <em>not</em> support scanned images
                  (OCR).
                </li>
              </ul>
            </div>

            <p class="about-footer">Version 0.5.0 ‚Ä¢ Secure ‚Ä¢ Offline</p>
          </div>
        </div>

        <div id="layout">
          <section id="files-panel" class="panel">
            <header class="panel-header">
              <span>Files</span>
              <div class="panel-buttons">
                <button id="add-file-btn">Ôºã Add</button>
                <button id="remove-file-btn">‚àí Remove</button>
                <button id="open-file-btn">‚Üó Open</button>
              </div>
            </header>
            <ul id="file-list"></ul>
          </section>

          <div id="resizer-panel" class="resizer-vertical"></div>

          <section id="preview-panel" class="panel">
            <header class="panel-header">
              <span id="preview-title"></span>
              <div class="panel-buttons">
                <button
                  id="toggle-search-btn"
                  title="Find in file"
                  class="hidden"
                >
                  üîç
                </button>
                <button id="export-file-notes-btn">Export File</button>
                <button id="export-project-notes-btn">Export Project</button>
              </div>
            </header>

            <div id="split-container">
              <div id="file-view-pane">
                <div id="preview-search-bar" class="hidden">
                  <input
                    id="preview-search-input"
                    placeholder="Find in document..."
                  />
                  <span id="search-count">0/0</span>
                  <button id="search-prev-btn">‚Üë</button>
                  <button id="search-next-btn">‚Üì</button>
                  <button id="search-close-btn">‚úï</button>
                </div>
                <div id="preview-body"></div>
              </div>

              <div id="resizer-notes" class="resizer-horizontal"></div>

              <div id="meta-view-pane">
                <div id="meta-tabs">
                  <div id="notes-header">Notes</div>
                  <div id="tags-header">Tags</div>
                </div>
                <div id="meta-content-wrapper">
                  <textarea
                    id="notes-box"
                    placeholder="Write your notes here..."
                  ></textarea>
                  <div id="tags-wrapper">
                    <div id="tags-container"></div>
                    <input id="tag-input" placeholder="Add tag‚Ä¶" />
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <div id="rename-modal" class="hidden modal-overlay">
      <div class="modal-box">
        <h3>Rename Project</h3>
        <input id="rename-input" placeholder="New project name..." />
        <div class="modal-buttons">
          <button id="rename-cancel-btn">Cancel</button>
          <button id="rename-confirm-btn" class="primary">Rename</button>
        </div>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
